<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5ZQZCG5P');</script>
    <!-- End Google Tag Manager -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>„Çπ„Éû„Éº„ÉàÂâ≤„ÇäÂãò | „É¢„Éê„Ç§„É´Â∞ÇÁî®Ââ≤„ÇäÂãòË®àÁÆó„ÉÑ„Éº„É´</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans JP', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide-react@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap');

        :root {
            --ios-safe-bottom: env(safe-area-inset-bottom);
        }

        body {
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: contain;
            font-family: 'Outfit', 'Noto Sans JP', sans-serif;
            font-size: 16px;
            /* Prevents auto-zoom on iOS */
        }

        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* 48px Touch Target compliance */
        input,
        button,
        select {
            min-height: 48px;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .shadow-premium {
            box-shadow: 0 10px 30px -10px rgba(79, 70, 229, 0.15);
        }

        .animate-slide-up {
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5ZQZCG5P" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="root"></div>

    <script>
        // Lucide Icons initialization helper (Robust version)
        window.getIcon = function (name) {
            // Priority 1: Check LucideReact (React Components)
            if (window.LucideReact && window.LucideReact[name]) return window.LucideReact[name];

            // Priority 2: Check Lucide (Core Data) and wrap it
            if (window.lucide && window.lucide[name]) {
                const iconData = window.lucide[name];

                // If it's the raw data array [tag, attrs, children]
                if (Array.isArray(iconData)) {
                    return function (props) {
                        const renderNode = (node, key) => {
                            if (!node || !Array.isArray(node)) return null;
                            const [tag, attrs, children] = node;
                            const combinedAttrs = key !== undefined ? { ...attrs, key } : attrs;
                            return React.createElement(tag, combinedAttrs,
                                children ? children.map((c, i) => renderNode(c, i)) : null
                            );
                        };

                        // The iconData from Lucide core is typically the array of children for the SVG
                        // We need to wrap it in an SVG tag
                        return React.createElement('svg', {
                            xmlns: 'http://www.w3.org/2000/svg',
                            width: '24',
                            height: '24',
                            viewBox: '0 0 24 24',
                            fill: 'none',
                            stroke: 'currentColor',
                            strokeWidth: '2',
                            strokeLinecap: 'round',
                            strokeLinejoin: 'round',
                            ...props
                        }, iconData.map((c, i) => renderNode(c, i)));
                    };
                }

                // If it's somehow already a component or function
                if (typeof iconData === 'function') return iconData;
            }

            // Priority 3: Last resort fallback (Emoji based or safe div)
            const fallbacks = {
                Wallet: 'üí∞',
                Users: 'üë•',
                Plus: 'Ôºã',
                Trash2: 'üóëÔ∏è',
                ChevronDown: '‚ñº',
                Check: '‚úÖ'
            };

            return (props) => React.createElement('span', {
                ...props,
                style: { display: 'inline-flex', alignItems: 'center', justifyContent: 'center', ...props.style }
            }, fallbacks[name] || '‚Ä¢');
        };

        // Pre-define icons used in the app as ready-to-use components
        window.Icons = {
            Users: (props) => React.createElement(window.getIcon('Users'), { className: 'w-5 h-5 text-indigo-500', ...props }),
            Plus: (props) => React.createElement(window.getIcon('Plus'), { className: 'w-3 h-3', ...props }),
            Trash2: (props) => React.createElement(window.getIcon('Trash2'), { className: 'w-5 h-5', ...props }),
            Wallet: (props) => React.createElement(window.getIcon('Wallet'), { className: 'w-6 h-6', ...props }),
            RefreshCw: (props) => React.createElement(window.getIcon('RefreshCw'), { className: 'w-6 h-6', ...props }),
            ChevronDown: (props) => React.createElement(window.getIcon('ChevronDown'), { className: 'w-3 h-3 text-slate-400', ...props }),
            Check: (props) => React.createElement(window.getIcon('Check'), { className: 'w-4 h-4', ...props })
        };
    </script>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const { Wallet, Users, Plus, Trash2, ChevronDown, Check, RefreshCw } = window.Icons;

        const WEIGHTS = {
            VERY_HIGH: { label: 'Â§ö„ÇÅ', value: 1.4 },
            HIGH: { label: '„ÇÑ„ÇÑÂ§ö„ÇÅ', value: 1.2 },
            NORMAL: { label: 'ÊôÆÈÄö', value: 1.0 },
            LOW: { label: '„ÇÑ„ÇÑÂ∞ë„Å™„ÅÑ', value: 0.8 },
            VERY_LOW: { label: 'Â∞ë„Å™„ÅÑ', value: 0.6 }
        };

        const App = () => {
            const [totalAmount, setTotalAmount] = useState(0);
            const [members, setMembers] = useState([
                { id: '1', name: '„É°„É≥„Éê„Éº1', weight: 'NORMAL' },
                { id: '2', name: '„É°„É≥„Éê„Éº2', weight: 'NORMAL' }
            ]);
            const [prepayments, setPrepayments] = useState([]);
            const [splitStyle, setSplitStyle] = useState('ROUGH'); // 'ROUGH' or 'DETAILED'

            // Ë®àÁÆó„É≠„Ç∏„ÉÉ„ÇØ
            const results = useMemo(() => {
                if (totalAmount <= 0 || members.length === 0) return [];

                // ÂÖàÊâï„ÅÑ„ÅÆÂêàË®à
                const totalPrepaid = prepayments.reduce((sum, p) => sum + p.amount, 0);
                // Ââ≤„ÇäÂãòÂØæË±°È°ç (Ë≤†„ÅÆÊï∞„Å´„Å™„Çâ„Å™„ÅÑ„Çà„ÅÜ„Å´Ë™øÊï¥)
                const remainingToSplit = Math.max(0, totalAmount - totalPrepaid);

                // ÂêàË®àÈáç„Åø
                const totalWeight = members.reduce((sum, m) => sum + WEIGHTS[m.weight].value, 0);

                const unit = splitStyle === 'ROUGH' ? 500 : 10;

                // ÂêÑ„É°„É≥„Éê„Éº„ÅÆË≤†ÊãÖÈ°çÁÆóÂá∫
                const memberResults = members.map(member => {
                    const weightValue = WEIGHTS[member.weight].value;
                    // ÊåáÂÆöÂçò‰Ωç„ÅßÂàá„Çä‰∏ä„Åí
                    const splitShare = totalWeight > 0 ? Math.ceil((remainingToSplit * (weightValue / totalWeight)) / unit) * unit : 0;

                    // „Åù„ÅÆ„É°„É≥„Éê„Éº„ÅåÂÖàÊâï„ÅÑ„Åó„Å¶„ÅÑ„ÅüÂêàË®àÈ°ç
                    const memberPrepaid = prepayments
                        .filter((p, idx) => (p.name || `ÂÖàÊâï„ÅÑ${idx + 1}`) === member.name)
                        .reduce((sum, p) => sum + p.amount, 0);

                    // ÊúÄÁµÇÁöÑ„Å™ÂèéÊîØ: Ë≤†ÊãÖÈ°ç - Ëá™ÂàÜ„ÅåÂÖàÊâï„ÅÑ„Åó„ÅüÈ°ç
                    // Ê≠£„Å™„Çâ„ÄåÊâï„ÅÜ„Äç„ÄÅË≤†„Å™„Çâ„Äå„ÇÇ„Çâ„ÅÜ„Äç
                    const settlement = splitShare - memberPrepaid;

                    return {
                        ...member,
                        share: splitShare,
                        memberPrepaid, // „Éá„Éê„ÉÉ„Ç∞/Ë°®Á§∫Áî®
                        settlement
                    };
                });

                // „É°„É≥„Éê„Éº„É™„Çπ„Éà„Å´„ÅØ„ÅÑ„Å™„ÅÑ„Åå„ÄÅÂÖàÊâï„ÅÑ„Å†„Åë„Åó„Åü‰∫∫„ÅÆÊäΩÂá∫
                const externalPrepayers = prepayments
                    .filter((p, idx) => !members.some(m => m.name === (p.name || `ÂÖàÊâï„ÅÑ${idx + 1}`)))
                    .reduce((acc, p, idx) => {
                        const displayName = p.name || `ÂÖàÊâï„ÅÑ${idx + 1}`;
                        const existing = acc.find(a => a.name === displayName);
                        if (existing) {
                            existing.amount += p.amount;
                        } else {
                            acc.push({ name: displayName, amount: p.amount });
                        }
                        return acc;
                    }, [])
                    .map(ep => ({
                        id: `ext-${ep.name}`,
                        name: ep.name,
                        share: 0,
                        memberPrepaid: ep.amount,
                        settlement: -ep.amount // ÂÖ®È°ç„Äå„ÇÇ„Çâ„ÅÜ„Äç
                    }));

                const finalResults = [...memberResults, ...externalPrepayers];

                // „ÅäÈá£„Çä„ÅÆË®àÁÆó
                const totalShares = memberResults.reduce((sum, r) => sum + r.share, 0);
                const surplus = totalShares - remainingToSplit;

                return {
                    list: finalResults,
                    surplus: Math.max(0, surplus)
                };
            }, [totalAmount, members, prepayments, splitStyle]);

            const sumPrepaid = useMemo(() => prepayments.reduce((sum, p) => sum + p.amount, 0), [prepayments]);
            const remainingToSplit = Math.max(0, totalAmount - sumPrepaid);
            const displayResults = results.list || [];
            const surplusAmount = results.surplus || 0;

            const addMember = () => {
                const newId = Math.random().toString(36).substr(2, 9);
                setMembers([...members, { id: newId, name: `„É°„É≥„Éê„Éº${members.length + 1}`, weight: 'NORMAL' }]);
            };

            const addPrepayment = () => {
                const newId = Math.random().toString(36).substr(2, 9);
                setPrepayments([...prepayments, { id: newId, name: `ÂÖàÊâï„ÅÑ${prepayments.length + 1}`, amount: 0 }]);
            };

            const removeMember = (id) => {
                if (members.length > 1) {
                    setMembers(members.filter(m => m.id !== id));
                }
            };

            const removePrepayment = (id) => {
                setPrepayments(prepayments.filter(p => p.id !== id));
            };

            const updateMember = (id, field, value) => {
                setMembers(members.map(m => m.id === id ? { ...m, [field]: value } : m));
            };

            const updatePrepayment = (id, field, value) => {
                setPrepayments(prepayments.map(p => p.id === id ? { ...p, [field]: value } : p));
            };

            return (
                <div className="min-h-screen bg-[#FDFDFF] pb-32 font-sans text-slate-900 overflow-x-hidden">
                    {/* Header */}
                    <header className="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-slate-100 py-4 px-6 flex items-center justify-between shadow-sm">
                        <div className="flex items-center gap-2">
                            <div className="bg-indigo-600 p-2 rounded-xl shadow-indigo-200 shadow-lg">
                                <Wallet className="text-white w-5 h-5" />
                            </div>
                            <h1 className="text-xl font-bold tracking-tight bg-gradient-to-r from-indigo-600 to-indigo-800 bg-clip-text text-transparent">
                                „Çπ„Éû„Éº„ÉàÂâ≤„ÇäÂãò
                            </h1>
                        </div>
                        <div className="text-[10px] text-slate-400 font-bold tracking-widest uppercase">Mobile First</div>
                    </header>

                    <main className="max-w-xl mx-auto space-y-8 p-4 md:p-6 animate-slide-up">
                        {/* 1. ÂêàË®àÈáëÈ°ç„Çª„ÇØ„Ç∑„Éß„É≥ */}
                        <section className="bg-white rounded-3xl p-6 shadow-premium border border-slate-100 relative overflow-hidden">
                            <div className="absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-full -mr-16 -mt-16 -z-10 opacity-50"></div>
                            <label className="block text-xs font-bold text-indigo-400 uppercase tracking-widest mb-3">Total Amount</label>
                            <div className="relative flex items-end">
                                <input
                                    type="number"
                                    inputMode="numeric"
                                    placeholder="0"
                                    className="w-full text-5xl font-bold py-2 border-none focus:ring-0 outline-none transition-colors placeholder:text-slate-100 text-indigo-900"
                                    value={totalAmount || ''}
                                    onChange={(e) => setTotalAmount(Number(e.target.value))}
                                />
                                <span className="text-2xl font-bold text-slate-300 ml-2 mb-3">ÂÜÜ</span>
                            </div>
                        </section>

                        {/* 2. „Çπ„Çø„Ç§„É´ & ÂÖàÊâï„ÅÑÊ¶ÇË¶Å */}
                        <div className="grid grid-cols-1 gap-4">
                            <section className="bg-slate-200/50 p-1.5 rounded-2xl flex gap-1.5 h-14">
                                <button
                                    onClick={() => setSplitStyle('ROUGH')}
                                    className={`flex-1 flex items-center justify-center text-sm font-bold rounded-xl transition-all ${splitStyle === 'ROUGH' ? 'bg-white text-indigo-600 shadow-sm scale-[1.02]' : 'text-slate-500 hover:text-slate-600'}`}
                                >
                                    „Åñ„Å£„Åè„Çä
                                    <span className="ml-1 opacity-50 text-[10px]">500ÂÜÜ</span>
                                </button>
                                <button
                                    onClick={() => setSplitStyle('DETAILED')}
                                    className={`flex-1 flex items-center justify-center text-sm font-bold rounded-xl transition-all ${splitStyle === 'DETAILED' ? 'bg-white text-indigo-600 shadow-sm scale-[1.02]' : 'text-slate-500 hover:text-slate-600'}`}
                                >
                                    Ë©≥Á¥∞
                                    <span className="ml-1 opacity-50 text-[10px]">10ÂÜÜ</span>
                                </button>
                            </section>

                            {sumPrepaid > 0 && (
                                <section className="bg-indigo-50 rounded-3xl p-6 border border-indigo-100/50 flex items-center justify-between">
                                    <div className="space-y-1">
                                        <div className="text-[10px] font-bold text-indigo-400 uppercase tracking-widest"> ÂØæË±°È°ç</div>
                                        <div className="text-2xl font-bold text-indigo-600">{remainingToSplit.toLocaleString()}ÂÜÜ</div>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">ÂÖàÊâï„ÅÑË®à</div>
                                        <div className="text-sm font-bold text-slate-500">{sumPrepaid.toLocaleString()}ÂÜÜ</div>
                                    </div>
                                </section>
                            )}
                        </div>

                        {/* 3. ÂÖàÊâï„ÅÑÁôªÈå≤ */}
                        <section>
                            <div className="flex items-center justify-between px-2 mb-4">
                                <h2 className="text-sm font-bold text-slate-800 flex items-center gap-2">
                                    <div className="bg-slate-200 p-1.5 rounded-lg"><Check className="w-4 h-4 text-slate-600" /></div>
                                    ÂÖàÊâï„ÅÑÁôªÈå≤
                                </h2>
                                <button
                                    onClick={addPrepayment}
                                    className="h-10 px-4 text-sm font-bold text-white bg-indigo-600 rounded-2xl shadow-lg shadow-indigo-100 flex items-center gap-2 active:scale-95 transition-all"
                                >
                                    <Plus className="w-4 h-4" /> ËøΩÂä†
                                </button>
                            </div>

                            <div className="space-y-3">
                                {prepayments.map((p) => (
                                    <div key={p.id} className="bg-white rounded-3xl p-3 shadow-sm border border-slate-100 flex items-center gap-3 animate-slide-up">
                                        <input
                                            type="text"
                                            placeholder="ÂêçÂâç"
                                            className="min-w-0 flex-1 bg-slate-50 border-none rounded-2xl h-12 px-4 text-base font-bold text-slate-700 focus:ring-2 focus:ring-indigo-100 outline-none"
                                            value={p.name}
                                            onChange={(e) => updatePrepayment(p.id, 'name', e.target.value)}
                                        />
                                        <div className="relative w-32 shrink-0">
                                            <input
                                                type="number"
                                                inputMode="numeric"
                                                placeholder="0"
                                                className="w-full bg-slate-50 border-none rounded-2xl h-12 pl-4 pr-8 text-base font-bold text-slate-900 focus:ring-2 focus:ring-indigo-100 outline-none"
                                                value={p.amount || ''}
                                                onChange={(e) => updatePrepayment(p.id, 'amount', Number(e.target.value))}
                                            />
                                            <span className="absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-slate-300">ÂÜÜ</span>
                                        </div>
                                        <button onClick={() => removePrepayment(p.id)} className="w-12 h-12 flex items-center justify-center text-slate-200 hover:text-red-400 transition-colors">
                                            <Trash2 className="w-5 h-5" />
                                        </button>
                                    </div>
                                ))}
                                {prepayments.length === 0 && (
                                    <div className="h-20 flex items-center justify-center border-2 border-dashed border-slate-200 rounded-3xl text-xs font-bold text-slate-300 uppercase tracking-widest">
                                        No Prepayments
                                    </div>
                                )}
                            </div>
                        </section>

                        {/* 4. „É°„É≥„Éê„ÉºË®≠ÂÆö */}
                        <section>
                            <div className="flex items-center justify-between px-2 mb-4 mt-8">
                                <h2 className="text-sm font-bold text-slate-800 flex items-center gap-2">
                                    <div className="bg-slate-200 p-1.5 rounded-lg"><Users className="w-4 h-4 text-slate-600" /></div>
                                    „É°„É≥„Éê„ÉºË®≠ÂÆö
                                </h2>
                                <button
                                    onClick={addMember}
                                    className="h-10 px-4 text-sm font-bold text-indigo-600 bg-indigo-50 rounded-2xl flex items-center gap-2 active:scale-95 transition-all"
                                >
                                    <Plus className="w-4 h-4" /> ËøΩÂä†
                                </button>
                            </div>

                            <div className="space-y-4">
                                {displayResults.filter(r => !r.id.toString().startsWith('ext-')).map((res) => (
                                    <div key={res.id} className="bg-white rounded-[2rem] p-6 shadow-premium border border-slate-50 relative animate-slide-up">
                                        <div className="flex flex-col gap-5">
                                            {/* ÂêçÂâç„ÉªÈáëÈ°çË°å */}
                                            <div className="flex items-center justify-between gap-4">
                                                <input
                                                    type="text"
                                                    className="min-w-0 flex-1 h-14 bg-slate-50 border-none rounded-2xl px-5 text-lg font-bold text-slate-800 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"
                                                    value={res.name}
                                                    onChange={(e) => updateMember(res.id, 'name', e.target.value)}
                                                />
                                                <div className="text-right shrink-0">
                                                    <div className="text-[10px] font-bold text-slate-300 uppercase tracking-widest mb-1">Ë≤†ÊãÖÈ°ç</div>
                                                    <div className="text-2xl font-bold bg-indigo-600 bg-clip-text text-transparent">
                                                        {res.share.toLocaleString()}<span className="text-xs ml-1 text-slate-300">ÂÜÜ</span>
                                                    </div>
                                                </div>
                                                <button
                                                    onClick={() => removeMember(res.id)}
                                                    disabled={members.length <= 1}
                                                    className="w-10 h-10 flex items-center justify-center text-slate-200 hover:text-red-400 disabled:opacity-0 transition-colors shrink-0"
                                                >
                                                    <Trash2 className="w-5 h-5" />
                                                </button>
                                            </div>

                                            {/* Ë≤†ÊãÖÂâ≤Âêà„Çª„Ç∞„É°„É≥„Éà */}
                                            <div className="bg-slate-50 p-1.5 rounded-2xl flex gap-1.5 overflow-x-auto no-scrollbar">
                                                {Object.entries(WEIGHTS).map(([key, info]) => (
                                                    <button
                                                        key={key}
                                                        onClick={() => updateMember(res.id, 'weight', key)}
                                                        className={`shrink-0 flex-1 px-3 py-3 text-xs font-bold rounded-xl transition-all whitespace-nowrap ${res.weight === key ? 'bg-white text-indigo-600 shadow-md scale-[1.05] z-10' : 'text-slate-400 hover:text-slate-600'}`}
                                                    >
                                                        {info.label}
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </section>

                        {/* 5. ÊúÄÁµÇÁ≤æÁÆó */}
                        {displayResults.some(r => r.settlement !== 0) && (
                            <section className="bg-slate-900 rounded-[3rem] p-8 text-white shadow-2xl shadow-indigo-100 relative overflow-hidden mb-12">
                                <div className="absolute bottom-0 right-0 w-48 h-48 bg-indigo-500/10 rounded-full -mb-24 -mr-24 blur-2xl"></div>
                                <div className="flex items-center justify-between mb-8">
                                    <h2 className="text-xl font-bold flex items-center gap-3">
                                        <div className="bg-white/10 p-2 rounded-xl"><RefreshCw className="w-6 h-6 text-indigo-300" /></div>
                                        ÊúÄÁµÇÁöÑ„Å™Á≤æÁÆó
                                    </h2>
                                    {surplusAmount > 0 && (
                                        <div className="bg-indigo-500/30 border border-indigo-400/30 px-4 py-2 rounded-2xl flex flex-col items-center">
                                            <span className="text-[10px] font-bold text-indigo-200 uppercase tracking-widest">„ÅäÈá£„Çä</span>
                                            <span className="text-lg font-bold">{surplusAmount.toLocaleString()}ÂÜÜ</span>
                                        </div>
                                    )}
                                </div>
                                <div className="space-y-6">
                                    {displayResults.filter(r => r.settlement !== 0).map((res) => (
                                        <div key={res.id} className="flex items-center justify-between group">
                                            <div className="space-y-1">
                                                <div className="flex items-center gap-2">
                                                    <span className="text-base font-bold text-slate-100">{res.name}</span>
                                                    {res.id.toString().startsWith('ext-') && (
                                                        <span className="text-[9px] bg-white/10 px-2 py-0.5 rounded-full font-bold uppercase tracking-tighter text-indigo-300">Prepaid Only</span>
                                                    )}
                                                </div>
                                                <div className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Settlement Action</div>
                                            </div>
                                            <div className="text-right">
                                                <div className={`text-2xl font-bold ${res.settlement > 0 ? 'text-indigo-300' : 'text-emerald-400'}`}>
                                                    {Math.abs(res.settlement).toLocaleString()}
                                                    <span className="text-xs ml-1 opacity-60">ÂÜÜ</span>
                                                </div>
                                                <div className={`text-xs font-bold uppercase tracking-widest ${res.settlement > 0 ? 'text-indigo-400' : 'text-emerald-600'}`}>
                                                    {res.settlement > 0 ? 'Êâï„ÅÜ' : '„ÇÇ„Çâ„ÅÜ'}
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>
                        )}
                    </main>

                    {/* Fixed Summary Bottom bar */}
                    {totalAmount > 0 && (
                        <div className="fixed bottom-6 left-4 right-4 z-50 animate-slide-up">
                            <div className="glass-card shadow-2xl rounded-3xl p-5 flex items-center justify-between max-w-lg mx-auto">
                                <div className="space-y-0.5">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Total Summary</div>
                                    <div className="text-xl font-bold text-indigo-600">{totalAmount.toLocaleString()}ÂÜÜ</div>
                                </div>
                                <button
                                    onClick={() => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' })}
                                    className="bg-slate-900 text-white px-6 py-3 rounded-2xl text-sm font-bold shadow-lg active:scale-95 transition-all flex items-center gap-2"
                                >
                                    ÁµêÊûú„ÇíË¶ã„Çã <ChevronDown className="w-4 h-4 opacity-50 rotate-[270deg]" />
                                </button>
                            </div>
                        </div>
                    )}

                    <footer className="pb-32 pt-12 text-center text-slate-300 text-[10px] items-center flex flex-col gap-2">
                        <div className="w-8 h-1 bg-slate-100 rounded-full"></div>
                        <span>&copy; 2026 Smart Warikan Tool ‚Ä¢ Designed for Mobile</span>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>